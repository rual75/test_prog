<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>test_prog: Исходный файл C:/Users/kip/Documents/STM32/test_prog/Src/usbd_conf.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Создано системой Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Титульная&nbsp;страница</span></a></li>
      <li><a href="modules.html"><span>Группы</span></a></li>
      <li class="current"><a href="files.html"><span>Файлы</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>Файлы</span></a></li>
      <li><a href="globals.html"><span>Список&nbsp;членов&nbsp;всех&nbsp;файлов</span></a></li>
    </ul>
  </div>
<h1>C:/Users/kip/Documents/STM32/test_prog/Src/usbd_conf.c</h1><a href="usbd__conf_8c.html">См. документацию.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00050"></a>00050 <span class="comment">/* Includes ------------------------------------------------------------------*/</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include "stm32f3xx.h"</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include "stm32f3xx_hal.h"</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include "usbd_def.h"</span>
<a name="l00054"></a>00054 <span class="preprocessor">#include "usbd_core.h"</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include "usbd_cdc.h"</span>
<a name="l00056"></a>00056 
<a name="l00057"></a>00057 <span class="comment">/* USER CODE BEGIN Includes */</span>
<a name="l00058"></a>00058 
<a name="l00059"></a>00059 <span class="comment">/* USER CODE END Includes */</span>
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 <span class="comment">/* Private typedef -----------------------------------------------------------*/</span>
<a name="l00062"></a>00062 <span class="comment">/* Private define ------------------------------------------------------------*/</span>
<a name="l00063"></a>00063 <span class="comment">/* Private macro -------------------------------------------------------------*/</span>
<a name="l00064"></a>00064 
<a name="l00065"></a>00065 <span class="comment">/* USER CODE BEGIN PV */</span>
<a name="l00066"></a>00066 <span class="comment">/* Private variables ---------------------------------------------------------*/</span>
<a name="l00067"></a>00067 
<a name="l00068"></a>00068 <span class="comment">/* USER CODE END PV */</span>
<a name="l00069"></a>00069 
<a name="l00070"></a>00070                 PCD_HandleTypeDef hpcd_USB_FS;
<a name="l00071"></a>00071 <span class="keywordtype">void</span> <a class="code" href="main_8c.html#829116a51f1db1a72ebd1120f60719d5" title="This function is executed in case of error occurrence.">_Error_Handler</a>(<span class="keywordtype">char</span> * file, <span class="keywordtype">int</span> line);
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 <span class="comment">/* USER CODE BEGIN 0 */</span>
<a name="l00074"></a>00074 
<a name="l00075"></a>00075 <span class="comment">/* USER CODE END 0 */</span>
<a name="l00076"></a>00076 
<a name="l00077"></a>00077 <span class="comment">/* USER CODE BEGIN PFP */</span>
<a name="l00078"></a>00078 <span class="comment">/* Private function prototypes -----------------------------------------------*/</span>
<a name="l00079"></a>00079 
<a name="l00080"></a>00080 <span class="comment">/* USER CODE END PFP */</span>
<a name="l00081"></a>00081 
<a name="l00082"></a>00082 <span class="comment">/* Private functions ---------------------------------------------------------*/</span>
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 <span class="comment">/* USER CODE BEGIN 1 */</span>
<a name="l00085"></a>00085 
<a name="l00086"></a>00086 <span class="comment">/* USER CODE END 1 */</span>
<a name="l00087"></a>00087 <span class="keywordtype">void</span> <a class="code" href="usbd__conf_8c.html#3d04e2831c0a46d0e6719c1a2caba5b1" title="Software device connection.">HAL_PCDEx_SetConnectionState</a>(PCD_HandleTypeDef *hpcd, uint8_t state);
<a name="l00088"></a>00088 
<a name="l00089"></a>00089 <span class="comment">/*******************************************************************************</span>
<a name="l00090"></a>00090 <span class="comment">                       LL Driver Callbacks (PCD -&gt; USB Device Library)</span>
<a name="l00091"></a>00091 <span class="comment">*******************************************************************************/</span>
<a name="l00092"></a>00092 <span class="comment">/* MSP Init */</span>
<a name="l00093"></a>00093 
<a name="l00094"></a><a class="code" href="usbd__conf_8c.html#b88e6d72062dc5d478ab12b435695ccb">00094</a> <span class="keywordtype">void</span> <a class="code" href="usbd__conf_8c.html#b88e6d72062dc5d478ab12b435695ccb">HAL_PCD_MspInit</a>(PCD_HandleTypeDef* pcdHandle)
<a name="l00095"></a>00095 {
<a name="l00096"></a>00096   GPIO_InitTypeDef GPIO_InitStruct;
<a name="l00097"></a>00097   <span class="keywordflow">if</span>(pcdHandle-&gt;Instance==USB)
<a name="l00098"></a>00098   {
<a name="l00099"></a>00099   <span class="comment">/* USER CODE BEGIN USB_MspInit 0 */</span>
<a name="l00100"></a>00100 
<a name="l00101"></a>00101   <span class="comment">/* USER CODE END USB_MspInit 0 */</span>
<a name="l00102"></a>00102   
<a name="l00107"></a>00107     GPIO_InitStruct.Pin = DM_Pin|DP_Pin;
<a name="l00108"></a>00108     GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
<a name="l00109"></a>00109     GPIO_InitStruct.Pull = GPIO_NOPULL;
<a name="l00110"></a>00110     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_HIGH;
<a name="l00111"></a>00111     GPIO_InitStruct.Alternate = GPIO_AF14_USB;
<a name="l00112"></a>00112     HAL_GPIO_Init(GPIOA, &amp;GPIO_InitStruct);
<a name="l00113"></a>00113 
<a name="l00114"></a>00114     <span class="comment">/* Peripheral clock enable */</span>
<a name="l00115"></a>00115     __HAL_RCC_USB_CLK_ENABLE();
<a name="l00116"></a>00116 
<a name="l00117"></a>00117     <span class="comment">/* Peripheral interrupt init */</span>
<a name="l00118"></a>00118     HAL_NVIC_SetPriority(USB_LP_CAN_RX0_IRQn, 5, 0);
<a name="l00119"></a>00119     HAL_NVIC_EnableIRQ(USB_LP_CAN_RX0_IRQn);
<a name="l00120"></a>00120   <span class="comment">/* USER CODE BEGIN USB_MspInit 1 */</span>
<a name="l00121"></a>00121 
<a name="l00122"></a>00122   <span class="comment">/* USER CODE END USB_MspInit 1 */</span>
<a name="l00123"></a>00123   }
<a name="l00124"></a>00124 }
<a name="l00125"></a>00125 
<a name="l00126"></a><a class="code" href="usbd__conf_8c.html#0a53f3c7c744fcfa7bdba6e9badc70d4">00126</a> <span class="keywordtype">void</span> <a class="code" href="usbd__conf_8c.html#0a53f3c7c744fcfa7bdba6e9badc70d4">HAL_PCD_MspDeInit</a>(PCD_HandleTypeDef* pcdHandle)
<a name="l00127"></a>00127 {
<a name="l00128"></a>00128   <span class="keywordflow">if</span>(pcdHandle-&gt;Instance==USB)
<a name="l00129"></a>00129   {
<a name="l00130"></a>00130   <span class="comment">/* USER CODE BEGIN USB_MspDeInit 0 */</span>
<a name="l00131"></a>00131 
<a name="l00132"></a>00132   <span class="comment">/* USER CODE END USB_MspDeInit 0 */</span>
<a name="l00133"></a>00133     <span class="comment">/* Peripheral clock disable */</span>
<a name="l00134"></a>00134     __HAL_RCC_USB_CLK_DISABLE();
<a name="l00135"></a>00135   
<a name="l00140"></a>00140     HAL_GPIO_DeInit(GPIOA, DM_Pin|DP_Pin);
<a name="l00141"></a>00141 
<a name="l00142"></a>00142     <span class="comment">/* Peripheral interrupt Deinit*/</span>
<a name="l00143"></a>00143     HAL_NVIC_DisableIRQ(USB_LP_CAN_RX0_IRQn);
<a name="l00144"></a>00144 
<a name="l00145"></a>00145   <span class="comment">/* USER CODE BEGIN USB_MspDeInit 1 */</span>
<a name="l00146"></a>00146 
<a name="l00147"></a>00147   <span class="comment">/* USER CODE END USB_MspDeInit 1 */</span>
<a name="l00148"></a>00148   }
<a name="l00149"></a>00149 }
<a name="l00150"></a>00150 
<a name="l00156"></a><a class="code" href="usbd__conf_8c.html#9d72aa4d3d984b164047b081d4566f6d">00156</a> <span class="keywordtype">void</span> <a class="code" href="usbd__conf_8c.html#9d72aa4d3d984b164047b081d4566f6d" title="Setup stage callback.">HAL_PCD_SetupStageCallback</a>(PCD_HandleTypeDef *hpcd)
<a name="l00157"></a>00157 {
<a name="l00158"></a>00158   USBD_LL_SetupStage((USBD_HandleTypeDef*)hpcd-&gt;pData, (uint8_t *)hpcd-&gt;Setup);
<a name="l00159"></a>00159 }
<a name="l00160"></a>00160 
<a name="l00167"></a><a class="code" href="usbd__conf_8c.html#2f1ac834d9677dcae7d8973828f81149">00167</a> <span class="keywordtype">void</span> <a class="code" href="usbd__conf_8c.html#2f1ac834d9677dcae7d8973828f81149" title="Data Out stage callback.">HAL_PCD_DataOutStageCallback</a>(PCD_HandleTypeDef *hpcd, uint8_t epnum)
<a name="l00168"></a>00168 {
<a name="l00169"></a>00169   USBD_LL_DataOutStage((USBD_HandleTypeDef*)hpcd-&gt;pData, epnum, hpcd-&gt;OUT_ep[epnum].xfer_buff);
<a name="l00170"></a>00170 }
<a name="l00171"></a>00171 
<a name="l00178"></a><a class="code" href="usbd__conf_8c.html#1679f5c50539a3dfca1391557e7a757b">00178</a> <span class="keywordtype">void</span> <a class="code" href="usbd__conf_8c.html#1679f5c50539a3dfca1391557e7a757b" title="Data In stage callback.">HAL_PCD_DataInStageCallback</a>(PCD_HandleTypeDef *hpcd, uint8_t epnum)
<a name="l00179"></a>00179 {
<a name="l00180"></a>00180   USBD_LL_DataInStage((USBD_HandleTypeDef*)hpcd-&gt;pData, epnum, hpcd-&gt;IN_ep[epnum].xfer_buff);
<a name="l00181"></a>00181 }
<a name="l00182"></a>00182 
<a name="l00188"></a><a class="code" href="usbd__conf_8c.html#85c99eeb4aa17d8ff5298efff92ac28e">00188</a> <span class="keywordtype">void</span> <a class="code" href="usbd__conf_8c.html#85c99eeb4aa17d8ff5298efff92ac28e" title="SOF callback.">HAL_PCD_SOFCallback</a>(PCD_HandleTypeDef *hpcd)
<a name="l00189"></a>00189 {
<a name="l00190"></a>00190   USBD_LL_SOF((USBD_HandleTypeDef*)hpcd-&gt;pData);
<a name="l00191"></a>00191 }
<a name="l00192"></a>00192 
<a name="l00198"></a><a class="code" href="usbd__conf_8c.html#f4fbef977092aa525c6b1668ffbec77b">00198</a> <span class="keywordtype">void</span> <a class="code" href="usbd__conf_8c.html#f4fbef977092aa525c6b1668ffbec77b" title="Reset callback.">HAL_PCD_ResetCallback</a>(PCD_HandleTypeDef *hpcd)
<a name="l00199"></a>00199 { 
<a name="l00200"></a>00200   USBD_SpeedTypeDef speed = USBD_SPEED_FULL;
<a name="l00201"></a>00201 
<a name="l00202"></a>00202   <span class="comment">/* Set USB current speed. */</span>
<a name="l00203"></a>00203   <span class="keywordflow">switch</span> (hpcd-&gt;Init.speed)
<a name="l00204"></a>00204   {
<a name="l00205"></a>00205   <span class="keywordflow">case</span> PCD_SPEED_FULL:
<a name="l00206"></a>00206     speed = USBD_SPEED_FULL;
<a name="l00207"></a>00207     <span class="keywordflow">break</span>;
<a name="l00208"></a>00208         
<a name="l00209"></a>00209   <span class="keywordflow">default</span>:
<a name="l00210"></a>00210     speed = USBD_SPEED_FULL;
<a name="l00211"></a>00211     <span class="keywordflow">break</span>;    
<a name="l00212"></a>00212   }
<a name="l00213"></a>00213   USBD_LL_SetSpeed((USBD_HandleTypeDef*)hpcd-&gt;pData, speed);
<a name="l00214"></a>00214   
<a name="l00215"></a>00215   <span class="comment">/* Reset Device. */</span>
<a name="l00216"></a>00216   USBD_LL_Reset((USBD_HandleTypeDef*)hpcd-&gt;pData);
<a name="l00217"></a>00217 }
<a name="l00218"></a>00218 
<a name="l00225"></a><a class="code" href="usbd__conf_8c.html#0e14acd4564979743bc0a89aa5f15428">00225</a> <span class="keywordtype">void</span> <a class="code" href="usbd__conf_8c.html#0e14acd4564979743bc0a89aa5f15428" title="Suspend callback. When Low power mode is enabled the debug cannot be used (IAR, Keil...">HAL_PCD_SuspendCallback</a>(PCD_HandleTypeDef *hpcd)
<a name="l00226"></a>00226 {
<a name="l00227"></a>00227   <span class="comment">/* Inform USB library that core enters in suspend Mode. */</span>
<a name="l00228"></a>00228   USBD_LL_Suspend((USBD_HandleTypeDef*)hpcd-&gt;pData);
<a name="l00229"></a>00229   <span class="comment">/* Enter in STOP mode. */</span>
<a name="l00230"></a>00230   <span class="comment">/* USER CODE BEGIN 2 */</span>
<a name="l00231"></a>00231   <span class="keywordflow">if</span> (hpcd-&gt;Init.low_power_enable)
<a name="l00232"></a>00232   {
<a name="l00233"></a>00233     <span class="comment">/* Set SLEEPDEEP bit and SleepOnExit of Cortex System Control Register. */</span>
<a name="l00234"></a>00234     SCB-&gt;SCR |= (uint32_t)((uint32_t)(SCB_SCR_SLEEPDEEP_Msk | SCB_SCR_SLEEPONEXIT_Msk));
<a name="l00235"></a>00235   }
<a name="l00236"></a>00236   <span class="comment">/* USER CODE END 2 */</span>
<a name="l00237"></a>00237 }
<a name="l00238"></a>00238 
<a name="l00245"></a><a class="code" href="usbd__conf_8c.html#0386a36b921cd51dd6e50103c3cd33b1">00245</a> <span class="keywordtype">void</span> <a class="code" href="usbd__conf_8c.html#0386a36b921cd51dd6e50103c3cd33b1" title="Resume callback. When Low power mode is enabled the debug cannot be used (IAR, Keil...">HAL_PCD_ResumeCallback</a>(PCD_HandleTypeDef *hpcd)
<a name="l00246"></a>00246 {
<a name="l00247"></a>00247   <span class="comment">/* USER CODE BEGIN 3 */</span>
<a name="l00248"></a>00248 
<a name="l00249"></a>00249   <span class="comment">/* USER CODE END 3 */</span>
<a name="l00250"></a>00250   USBD_LL_Resume((USBD_HandleTypeDef*)hpcd-&gt;pData);
<a name="l00251"></a>00251 }
<a name="l00252"></a>00252 
<a name="l00259"></a><a class="code" href="usbd__conf_8c.html#4274f129d782f0a3c9a10b5bbe022cd4">00259</a> <span class="keywordtype">void</span> <a class="code" href="usbd__conf_8c.html#4274f129d782f0a3c9a10b5bbe022cd4" title="ISOOUTIncomplete callback.">HAL_PCD_ISOOUTIncompleteCallback</a>(PCD_HandleTypeDef *hpcd, uint8_t epnum)
<a name="l00260"></a>00260 {
<a name="l00261"></a>00261   USBD_LL_IsoOUTIncomplete((USBD_HandleTypeDef*)hpcd-&gt;pData, epnum);
<a name="l00262"></a>00262 }
<a name="l00263"></a>00263 
<a name="l00270"></a><a class="code" href="usbd__conf_8c.html#8f4041d553ef2fb326c6e483797f99a8">00270</a> <span class="keywordtype">void</span> <a class="code" href="usbd__conf_8c.html#8f4041d553ef2fb326c6e483797f99a8" title="ISOINIncomplete callback.">HAL_PCD_ISOINIncompleteCallback</a>(PCD_HandleTypeDef *hpcd, uint8_t epnum)
<a name="l00271"></a>00271 {
<a name="l00272"></a>00272   USBD_LL_IsoINIncomplete((USBD_HandleTypeDef*)hpcd-&gt;pData, epnum);
<a name="l00273"></a>00273 }
<a name="l00274"></a>00274 
<a name="l00280"></a><a class="code" href="usbd__conf_8c.html#0c449541523759cf62be9c9d47540c5d">00280</a> <span class="keywordtype">void</span> <a class="code" href="usbd__conf_8c.html#0c449541523759cf62be9c9d47540c5d" title="Connect callback.">HAL_PCD_ConnectCallback</a>(PCD_HandleTypeDef *hpcd)
<a name="l00281"></a>00281 {
<a name="l00282"></a>00282   USBD_LL_DevConnected((USBD_HandleTypeDef*)hpcd-&gt;pData);
<a name="l00283"></a>00283 }
<a name="l00284"></a>00284 
<a name="l00290"></a><a class="code" href="usbd__conf_8c.html#25f930b5fe696224f8e71dacf5f324b4">00290</a> <span class="keywordtype">void</span> <a class="code" href="usbd__conf_8c.html#25f930b5fe696224f8e71dacf5f324b4" title="Disconnect callback.">HAL_PCD_DisconnectCallback</a>(PCD_HandleTypeDef *hpcd)
<a name="l00291"></a>00291 {
<a name="l00292"></a>00292   USBD_LL_DevDisconnected((USBD_HandleTypeDef*)hpcd-&gt;pData);
<a name="l00293"></a>00293 }
<a name="l00294"></a>00294 
<a name="l00295"></a>00295 <span class="comment">/*******************************************************************************</span>
<a name="l00296"></a>00296 <span class="comment">                       LL Driver Interface (USB Device Library --&gt; PCD)</span>
<a name="l00297"></a>00297 <span class="comment">*******************************************************************************/</span>
<a name="l00298"></a>00298 
<a name="l00304"></a><a class="code" href="usbd__conf_8c.html#24b61e95db7e4c7ad30a835e8d905943">00304</a> USBD_StatusTypeDef <a class="code" href="usbd__conf_8c.html#24b61e95db7e4c7ad30a835e8d905943" title="Initializes the low level portion of the device driver.">USBD_LL_Init</a>(USBD_HandleTypeDef *pdev)
<a name="l00305"></a>00305 {
<a name="l00306"></a>00306   <span class="comment">/* Init USB Ip. */</span>
<a name="l00307"></a>00307   <span class="comment">/* Link the driver to the stack. */</span>
<a name="l00308"></a>00308   hpcd_USB_FS.pData = pdev;
<a name="l00309"></a>00309   pdev-&gt;pData = &amp;hpcd_USB_FS;
<a name="l00310"></a>00310 
<a name="l00311"></a>00311   hpcd_USB_FS.Instance = USB;
<a name="l00312"></a>00312   hpcd_USB_FS.Init.dev_endpoints = 8;
<a name="l00313"></a>00313   hpcd_USB_FS.Init.speed = PCD_SPEED_FULL;
<a name="l00314"></a>00314   hpcd_USB_FS.Init.ep0_mps = DEP0CTL_MPS_64;
<a name="l00315"></a>00315   hpcd_USB_FS.Init.phy_itface = PCD_PHY_EMBEDDED;
<a name="l00316"></a>00316   hpcd_USB_FS.Init.low_power_enable = DISABLE;
<a name="l00317"></a>00317   hpcd_USB_FS.Init.battery_charging_enable = DISABLE;
<a name="l00318"></a>00318   <span class="keywordflow">if</span> (HAL_PCD_Init(&amp;hpcd_USB_FS) != HAL_OK)
<a name="l00319"></a>00319   {
<a name="l00320"></a>00320     <a class="code" href="main_8c.html#829116a51f1db1a72ebd1120f60719d5" title="This function is executed in case of error occurrence.">_Error_Handler</a>(__FILE__, __LINE__);
<a name="l00321"></a>00321   }
<a name="l00322"></a>00322 
<a name="l00323"></a>00323   HAL_PCDEx_PMAConfig((PCD_HandleTypeDef*)pdev-&gt;pData , 0x00 , PCD_SNG_BUF, 0x18);
<a name="l00324"></a>00324   HAL_PCDEx_PMAConfig((PCD_HandleTypeDef*)pdev-&gt;pData , 0x80 , PCD_SNG_BUF, 0x58);
<a name="l00325"></a>00325   HAL_PCDEx_PMAConfig((PCD_HandleTypeDef*)pdev-&gt;pData , 0x81 , PCD_SNG_BUF, 0xC0);
<a name="l00326"></a>00326   HAL_PCDEx_PMAConfig((PCD_HandleTypeDef*)pdev-&gt;pData , 0x01 , PCD_SNG_BUF, 0x110);
<a name="l00327"></a>00327   HAL_PCDEx_PMAConfig((PCD_HandleTypeDef*)pdev-&gt;pData , 0x82 , PCD_SNG_BUF, 0x100);
<a name="l00328"></a>00328   <span class="keywordflow">return</span> USBD_OK;
<a name="l00329"></a>00329 }
<a name="l00330"></a>00330 
<a name="l00336"></a><a class="code" href="usbd__conf_8c.html#ae9bfb6a27b11f232fc55a1d1b28be24">00336</a> USBD_StatusTypeDef <a class="code" href="usbd__conf_8c.html#ae9bfb6a27b11f232fc55a1d1b28be24" title="De-Initializes the low level portion of the device driver.">USBD_LL_DeInit</a>(USBD_HandleTypeDef *pdev)
<a name="l00337"></a>00337 {
<a name="l00338"></a>00338   HAL_StatusTypeDef hal_status = HAL_OK;
<a name="l00339"></a>00339   USBD_StatusTypeDef usb_status = USBD_OK;
<a name="l00340"></a>00340 
<a name="l00341"></a>00341   hal_status = HAL_PCD_DeInit(pdev-&gt;pData);
<a name="l00342"></a>00342 
<a name="l00343"></a>00343   <span class="keywordflow">switch</span> (hal_status) {
<a name="l00344"></a>00344     <span class="keywordflow">case</span> HAL_OK :
<a name="l00345"></a>00345       usb_status = USBD_OK;
<a name="l00346"></a>00346     <span class="keywordflow">break</span>;
<a name="l00347"></a>00347     <span class="keywordflow">case</span> HAL_ERROR :
<a name="l00348"></a>00348       usb_status = USBD_FAIL;
<a name="l00349"></a>00349     <span class="keywordflow">break</span>;
<a name="l00350"></a>00350     <span class="keywordflow">case</span> HAL_BUSY :
<a name="l00351"></a>00351       usb_status = USBD_BUSY;
<a name="l00352"></a>00352     <span class="keywordflow">break</span>;
<a name="l00353"></a>00353     <span class="keywordflow">case</span> HAL_TIMEOUT :
<a name="l00354"></a>00354       usb_status = USBD_FAIL;
<a name="l00355"></a>00355     <span class="keywordflow">break</span>;
<a name="l00356"></a>00356     <span class="keywordflow">default</span> :
<a name="l00357"></a>00357       usb_status = USBD_FAIL;
<a name="l00358"></a>00358     <span class="keywordflow">break</span>;
<a name="l00359"></a>00359   }
<a name="l00360"></a>00360   <span class="keywordflow">return</span> usb_status; 
<a name="l00361"></a>00361 }
<a name="l00362"></a>00362 
<a name="l00368"></a><a class="code" href="usbd__conf_8c.html#43e53e424e9850d8261e1f9a1be53348">00368</a> USBD_StatusTypeDef <a class="code" href="usbd__conf_8c.html#43e53e424e9850d8261e1f9a1be53348" title="Starts the low level portion of the device driver.">USBD_LL_Start</a>(USBD_HandleTypeDef *pdev)
<a name="l00369"></a>00369 {
<a name="l00370"></a>00370   HAL_StatusTypeDef hal_status = HAL_OK;
<a name="l00371"></a>00371   USBD_StatusTypeDef usb_status = USBD_OK;
<a name="l00372"></a>00372  
<a name="l00373"></a>00373   hal_status = HAL_PCD_Start(pdev-&gt;pData);
<a name="l00374"></a>00374      
<a name="l00375"></a>00375   <span class="keywordflow">switch</span> (hal_status) {
<a name="l00376"></a>00376     <span class="keywordflow">case</span> HAL_OK :
<a name="l00377"></a>00377       usb_status = USBD_OK;
<a name="l00378"></a>00378     <span class="keywordflow">break</span>;
<a name="l00379"></a>00379     <span class="keywordflow">case</span> HAL_ERROR :
<a name="l00380"></a>00380       usb_status = USBD_FAIL;
<a name="l00381"></a>00381     <span class="keywordflow">break</span>;
<a name="l00382"></a>00382     <span class="keywordflow">case</span> HAL_BUSY :
<a name="l00383"></a>00383       usb_status = USBD_BUSY;
<a name="l00384"></a>00384     <span class="keywordflow">break</span>;
<a name="l00385"></a>00385     <span class="keywordflow">case</span> HAL_TIMEOUT :
<a name="l00386"></a>00386       usb_status = USBD_FAIL;
<a name="l00387"></a>00387     <span class="keywordflow">break</span>;
<a name="l00388"></a>00388     <span class="keywordflow">default</span> :
<a name="l00389"></a>00389       usb_status = USBD_FAIL;
<a name="l00390"></a>00390     <span class="keywordflow">break</span>;
<a name="l00391"></a>00391   }
<a name="l00392"></a>00392   <span class="keywordflow">return</span> usb_status;
<a name="l00393"></a>00393 }
<a name="l00394"></a>00394 
<a name="l00400"></a><a class="code" href="usbd__conf_8c.html#c522b28139c1868a2e24d044fc8288fd">00400</a> USBD_StatusTypeDef <a class="code" href="usbd__conf_8c.html#c522b28139c1868a2e24d044fc8288fd" title="Stops the low level portion of the device driver.">USBD_LL_Stop</a>(USBD_HandleTypeDef *pdev)
<a name="l00401"></a>00401 {
<a name="l00402"></a>00402   HAL_StatusTypeDef hal_status = HAL_OK;
<a name="l00403"></a>00403   USBD_StatusTypeDef usb_status = USBD_OK;
<a name="l00404"></a>00404 
<a name="l00405"></a>00405   hal_status = HAL_PCD_Stop(pdev-&gt;pData);
<a name="l00406"></a>00406 
<a name="l00407"></a>00407   <span class="keywordflow">switch</span> (hal_status) {
<a name="l00408"></a>00408     <span class="keywordflow">case</span> HAL_OK :
<a name="l00409"></a>00409       usb_status = USBD_OK;
<a name="l00410"></a>00410     <span class="keywordflow">break</span>;
<a name="l00411"></a>00411     <span class="keywordflow">case</span> HAL_ERROR :
<a name="l00412"></a>00412       usb_status = USBD_FAIL;
<a name="l00413"></a>00413     <span class="keywordflow">break</span>;
<a name="l00414"></a>00414     <span class="keywordflow">case</span> HAL_BUSY :
<a name="l00415"></a>00415       usb_status = USBD_BUSY;
<a name="l00416"></a>00416     <span class="keywordflow">break</span>;
<a name="l00417"></a>00417     <span class="keywordflow">case</span> HAL_TIMEOUT :
<a name="l00418"></a>00418       usb_status = USBD_FAIL;
<a name="l00419"></a>00419     <span class="keywordflow">break</span>;
<a name="l00420"></a>00420     <span class="keywordflow">default</span> :
<a name="l00421"></a>00421       usb_status = USBD_FAIL;
<a name="l00422"></a>00422     <span class="keywordflow">break</span>;
<a name="l00423"></a>00423   }
<a name="l00424"></a>00424   <span class="keywordflow">return</span> usb_status;
<a name="l00425"></a>00425 }
<a name="l00426"></a>00426 
<a name="l00435"></a><a class="code" href="usbd__conf_8c.html#d96254d74d95496ffb5f6f2248585cb0">00435</a> USBD_StatusTypeDef <a class="code" href="usbd__conf_8c.html#d96254d74d95496ffb5f6f2248585cb0" title="Opens an endpoint of the low level driver.">USBD_LL_OpenEP</a>(USBD_HandleTypeDef *pdev, uint8_t ep_addr, uint8_t ep_type, uint16_t ep_mps)
<a name="l00436"></a>00436 {
<a name="l00437"></a>00437   HAL_StatusTypeDef hal_status = HAL_OK;
<a name="l00438"></a>00438   USBD_StatusTypeDef usb_status = USBD_OK;
<a name="l00439"></a>00439 
<a name="l00440"></a>00440   hal_status = HAL_PCD_EP_Open(pdev-&gt;pData, ep_addr, ep_mps, ep_type);
<a name="l00441"></a>00441 
<a name="l00442"></a>00442   <span class="keywordflow">switch</span> (hal_status) {
<a name="l00443"></a>00443     <span class="keywordflow">case</span> HAL_OK :
<a name="l00444"></a>00444       usb_status = USBD_OK;
<a name="l00445"></a>00445     <span class="keywordflow">break</span>;
<a name="l00446"></a>00446     <span class="keywordflow">case</span> HAL_ERROR :
<a name="l00447"></a>00447       usb_status = USBD_FAIL;
<a name="l00448"></a>00448     <span class="keywordflow">break</span>;
<a name="l00449"></a>00449     <span class="keywordflow">case</span> HAL_BUSY :
<a name="l00450"></a>00450       usb_status = USBD_BUSY;
<a name="l00451"></a>00451     <span class="keywordflow">break</span>;
<a name="l00452"></a>00452     <span class="keywordflow">case</span> HAL_TIMEOUT :
<a name="l00453"></a>00453       usb_status = USBD_FAIL;
<a name="l00454"></a>00454     <span class="keywordflow">break</span>;
<a name="l00455"></a>00455     <span class="keywordflow">default</span> :
<a name="l00456"></a>00456       usb_status = USBD_FAIL;
<a name="l00457"></a>00457     <span class="keywordflow">break</span>;
<a name="l00458"></a>00458   }
<a name="l00459"></a>00459   <span class="keywordflow">return</span> usb_status;
<a name="l00460"></a>00460 }
<a name="l00461"></a>00461 
<a name="l00468"></a><a class="code" href="usbd__conf_8c.html#e12e7de3c398d5663976bf11faa63572">00468</a> USBD_StatusTypeDef <a class="code" href="usbd__conf_8c.html#e12e7de3c398d5663976bf11faa63572" title="Closes an endpoint of the low level driver.">USBD_LL_CloseEP</a>(USBD_HandleTypeDef *pdev, uint8_t ep_addr)
<a name="l00469"></a>00469 {
<a name="l00470"></a>00470   HAL_StatusTypeDef hal_status = HAL_OK;
<a name="l00471"></a>00471   USBD_StatusTypeDef usb_status = USBD_OK;
<a name="l00472"></a>00472   
<a name="l00473"></a>00473   hal_status = HAL_PCD_EP_Close(pdev-&gt;pData, ep_addr);
<a name="l00474"></a>00474       
<a name="l00475"></a>00475   <span class="keywordflow">switch</span> (hal_status) {
<a name="l00476"></a>00476     <span class="keywordflow">case</span> HAL_OK :
<a name="l00477"></a>00477       usb_status = USBD_OK;
<a name="l00478"></a>00478     <span class="keywordflow">break</span>;
<a name="l00479"></a>00479     <span class="keywordflow">case</span> HAL_ERROR :
<a name="l00480"></a>00480       usb_status = USBD_FAIL;
<a name="l00481"></a>00481     <span class="keywordflow">break</span>;
<a name="l00482"></a>00482     <span class="keywordflow">case</span> HAL_BUSY :
<a name="l00483"></a>00483       usb_status = USBD_BUSY;
<a name="l00484"></a>00484     <span class="keywordflow">break</span>;
<a name="l00485"></a>00485     <span class="keywordflow">case</span> HAL_TIMEOUT :
<a name="l00486"></a>00486       usb_status = USBD_FAIL;
<a name="l00487"></a>00487     <span class="keywordflow">break</span>;
<a name="l00488"></a>00488     <span class="keywordflow">default</span> :
<a name="l00489"></a>00489       usb_status = USBD_FAIL;
<a name="l00490"></a>00490     <span class="keywordflow">break</span>;
<a name="l00491"></a>00491   }
<a name="l00492"></a>00492   <span class="keywordflow">return</span> usb_status;  
<a name="l00493"></a>00493 }
<a name="l00494"></a>00494 
<a name="l00501"></a><a class="code" href="usbd__conf_8c.html#10080ed9555110afba809de968314985">00501</a> USBD_StatusTypeDef <a class="code" href="usbd__conf_8c.html#10080ed9555110afba809de968314985" title="Flushes an endpoint of the Low Level Driver.">USBD_LL_FlushEP</a>(USBD_HandleTypeDef *pdev, uint8_t ep_addr)
<a name="l00502"></a>00502 {
<a name="l00503"></a>00503   HAL_StatusTypeDef hal_status = HAL_OK;
<a name="l00504"></a>00504   USBD_StatusTypeDef usb_status = USBD_OK;
<a name="l00505"></a>00505   
<a name="l00506"></a>00506   hal_status = HAL_PCD_EP_Flush(pdev-&gt;pData, ep_addr);
<a name="l00507"></a>00507       
<a name="l00508"></a>00508   <span class="keywordflow">switch</span> (hal_status) {
<a name="l00509"></a>00509     <span class="keywordflow">case</span> HAL_OK :
<a name="l00510"></a>00510       usb_status = USBD_OK;
<a name="l00511"></a>00511     <span class="keywordflow">break</span>;
<a name="l00512"></a>00512     <span class="keywordflow">case</span> HAL_ERROR :
<a name="l00513"></a>00513       usb_status = USBD_FAIL;
<a name="l00514"></a>00514     <span class="keywordflow">break</span>;
<a name="l00515"></a>00515     <span class="keywordflow">case</span> HAL_BUSY :
<a name="l00516"></a>00516       usb_status = USBD_BUSY;
<a name="l00517"></a>00517     <span class="keywordflow">break</span>;
<a name="l00518"></a>00518     <span class="keywordflow">case</span> HAL_TIMEOUT :
<a name="l00519"></a>00519       usb_status = USBD_FAIL;
<a name="l00520"></a>00520     <span class="keywordflow">break</span>;
<a name="l00521"></a>00521     <span class="keywordflow">default</span> :
<a name="l00522"></a>00522       usb_status = USBD_FAIL;
<a name="l00523"></a>00523     <span class="keywordflow">break</span>;
<a name="l00524"></a>00524   }
<a name="l00525"></a>00525   <span class="keywordflow">return</span> usb_status;  
<a name="l00526"></a>00526 }
<a name="l00527"></a>00527 
<a name="l00534"></a><a class="code" href="usbd__conf_8c.html#bc2b4a7c8307e04955b015fd32057ec7">00534</a> USBD_StatusTypeDef <a class="code" href="usbd__conf_8c.html#bc2b4a7c8307e04955b015fd32057ec7" title="Sets a Stall condition on an endpoint of the Low Level Driver.">USBD_LL_StallEP</a>(USBD_HandleTypeDef *pdev, uint8_t ep_addr)
<a name="l00535"></a>00535 {
<a name="l00536"></a>00536   HAL_StatusTypeDef hal_status = HAL_OK;
<a name="l00537"></a>00537   USBD_StatusTypeDef usb_status = USBD_OK;
<a name="l00538"></a>00538   
<a name="l00539"></a>00539   hal_status = HAL_PCD_EP_SetStall(pdev-&gt;pData, ep_addr);
<a name="l00540"></a>00540 
<a name="l00541"></a>00541   <span class="keywordflow">switch</span> (hal_status) {
<a name="l00542"></a>00542     <span class="keywordflow">case</span> HAL_OK :
<a name="l00543"></a>00543       usb_status = USBD_OK;
<a name="l00544"></a>00544     <span class="keywordflow">break</span>;
<a name="l00545"></a>00545     <span class="keywordflow">case</span> HAL_ERROR :
<a name="l00546"></a>00546       usb_status = USBD_FAIL;
<a name="l00547"></a>00547     <span class="keywordflow">break</span>;
<a name="l00548"></a>00548     <span class="keywordflow">case</span> HAL_BUSY :
<a name="l00549"></a>00549       usb_status = USBD_BUSY;
<a name="l00550"></a>00550     <span class="keywordflow">break</span>;
<a name="l00551"></a>00551     <span class="keywordflow">case</span> HAL_TIMEOUT :
<a name="l00552"></a>00552       usb_status = USBD_FAIL;
<a name="l00553"></a>00553     <span class="keywordflow">break</span>;
<a name="l00554"></a>00554     <span class="keywordflow">default</span> :
<a name="l00555"></a>00555       usb_status = USBD_FAIL;
<a name="l00556"></a>00556     <span class="keywordflow">break</span>;
<a name="l00557"></a>00557   }
<a name="l00558"></a>00558   <span class="keywordflow">return</span> usb_status;  
<a name="l00559"></a>00559 }
<a name="l00560"></a>00560 
<a name="l00567"></a><a class="code" href="usbd__conf_8c.html#d4fa6f2eeefe95d07148c6c53d111eae">00567</a> USBD_StatusTypeDef <a class="code" href="usbd__conf_8c.html#d4fa6f2eeefe95d07148c6c53d111eae" title="Clears a Stall condition on an endpoint of the Low Level Driver.">USBD_LL_ClearStallEP</a>(USBD_HandleTypeDef *pdev, uint8_t ep_addr)
<a name="l00568"></a>00568 {
<a name="l00569"></a>00569   HAL_StatusTypeDef hal_status = HAL_OK;
<a name="l00570"></a>00570   USBD_StatusTypeDef usb_status = USBD_OK;
<a name="l00571"></a>00571   
<a name="l00572"></a>00572   hal_status = HAL_PCD_EP_ClrStall(pdev-&gt;pData, ep_addr);  
<a name="l00573"></a>00573      
<a name="l00574"></a>00574   <span class="keywordflow">switch</span> (hal_status) {
<a name="l00575"></a>00575     <span class="keywordflow">case</span> HAL_OK :
<a name="l00576"></a>00576       usb_status = USBD_OK;
<a name="l00577"></a>00577     <span class="keywordflow">break</span>;
<a name="l00578"></a>00578     <span class="keywordflow">case</span> HAL_ERROR :
<a name="l00579"></a>00579       usb_status = USBD_FAIL;
<a name="l00580"></a>00580     <span class="keywordflow">break</span>;
<a name="l00581"></a>00581     <span class="keywordflow">case</span> HAL_BUSY :
<a name="l00582"></a>00582       usb_status = USBD_BUSY;
<a name="l00583"></a>00583     <span class="keywordflow">break</span>;
<a name="l00584"></a>00584     <span class="keywordflow">case</span> HAL_TIMEOUT :
<a name="l00585"></a>00585       usb_status = USBD_FAIL;
<a name="l00586"></a>00586     <span class="keywordflow">break</span>;
<a name="l00587"></a>00587     <span class="keywordflow">default</span> :
<a name="l00588"></a>00588       usb_status = USBD_FAIL;
<a name="l00589"></a>00589     <span class="keywordflow">break</span>;
<a name="l00590"></a>00590   }
<a name="l00591"></a>00591   <span class="keywordflow">return</span> usb_status; 
<a name="l00592"></a>00592 }
<a name="l00593"></a>00593 
<a name="l00600"></a><a class="code" href="usbd__conf_8c.html#2a0f10f93cc4246272b63661051a64b7">00600</a> uint8_t <a class="code" href="usbd__conf_8c.html#2a0f10f93cc4246272b63661051a64b7" title="Returns Stall condition.">USBD_LL_IsStallEP</a>(USBD_HandleTypeDef *pdev, uint8_t ep_addr)
<a name="l00601"></a>00601 {
<a name="l00602"></a>00602   PCD_HandleTypeDef *hpcd = (PCD_HandleTypeDef*) pdev-&gt;pData;
<a name="l00603"></a>00603   
<a name="l00604"></a>00604   <span class="keywordflow">if</span>((ep_addr &amp; 0x80) == 0x80)
<a name="l00605"></a>00605   {
<a name="l00606"></a>00606     <span class="keywordflow">return</span> hpcd-&gt;IN_ep[ep_addr &amp; 0x7F].is_stall; 
<a name="l00607"></a>00607   }
<a name="l00608"></a>00608   <span class="keywordflow">else</span>
<a name="l00609"></a>00609   {
<a name="l00610"></a>00610     <span class="keywordflow">return</span> hpcd-&gt;OUT_ep[ep_addr &amp; 0x7F].is_stall; 
<a name="l00611"></a>00611   }
<a name="l00612"></a>00612 }
<a name="l00613"></a>00613 
<a name="l00620"></a><a class="code" href="usbd__conf_8c.html#d3674ea3c4a9c4bbe7c73192727f922f">00620</a> USBD_StatusTypeDef <a class="code" href="usbd__conf_8c.html#d3674ea3c4a9c4bbe7c73192727f922f" title="Assigns a USB address to the device.">USBD_LL_SetUSBAddress</a>(USBD_HandleTypeDef *pdev, uint8_t dev_addr)
<a name="l00621"></a>00621 {
<a name="l00622"></a>00622   HAL_StatusTypeDef hal_status = HAL_OK;
<a name="l00623"></a>00623   USBD_StatusTypeDef usb_status = USBD_OK;
<a name="l00624"></a>00624   
<a name="l00625"></a>00625   hal_status = HAL_PCD_SetAddress(pdev-&gt;pData, dev_addr);
<a name="l00626"></a>00626      
<a name="l00627"></a>00627   <span class="keywordflow">switch</span> (hal_status) {
<a name="l00628"></a>00628     <span class="keywordflow">case</span> HAL_OK :
<a name="l00629"></a>00629       usb_status = USBD_OK;
<a name="l00630"></a>00630     <span class="keywordflow">break</span>;
<a name="l00631"></a>00631     <span class="keywordflow">case</span> HAL_ERROR :
<a name="l00632"></a>00632       usb_status = USBD_FAIL;
<a name="l00633"></a>00633     <span class="keywordflow">break</span>;
<a name="l00634"></a>00634     <span class="keywordflow">case</span> HAL_BUSY :
<a name="l00635"></a>00635       usb_status = USBD_BUSY;
<a name="l00636"></a>00636     <span class="keywordflow">break</span>;
<a name="l00637"></a>00637     <span class="keywordflow">case</span> HAL_TIMEOUT :
<a name="l00638"></a>00638       usb_status = USBD_FAIL;
<a name="l00639"></a>00639     <span class="keywordflow">break</span>;
<a name="l00640"></a>00640     <span class="keywordflow">default</span> :
<a name="l00641"></a>00641       usb_status = USBD_FAIL;
<a name="l00642"></a>00642     <span class="keywordflow">break</span>;
<a name="l00643"></a>00643   }
<a name="l00644"></a>00644   <span class="keywordflow">return</span> usb_status;  
<a name="l00645"></a>00645 }
<a name="l00646"></a>00646 
<a name="l00655"></a><a class="code" href="usbd__conf_8c.html#b87eb9f3d4d9f8956d2c6b77230f265c">00655</a> USBD_StatusTypeDef <a class="code" href="usbd__conf_8c.html#b87eb9f3d4d9f8956d2c6b77230f265c" title="Transmits data over an endpoint.">USBD_LL_Transmit</a>(USBD_HandleTypeDef *pdev, uint8_t ep_addr, uint8_t *pbuf, uint16_t size)
<a name="l00656"></a>00656 {
<a name="l00657"></a>00657   HAL_StatusTypeDef hal_status = HAL_OK;
<a name="l00658"></a>00658   USBD_StatusTypeDef usb_status = USBD_OK;
<a name="l00659"></a>00659 
<a name="l00660"></a>00660   hal_status = HAL_PCD_EP_Transmit(pdev-&gt;pData, ep_addr, pbuf, size);
<a name="l00661"></a>00661      
<a name="l00662"></a>00662   <span class="keywordflow">switch</span> (hal_status) {
<a name="l00663"></a>00663     <span class="keywordflow">case</span> HAL_OK :
<a name="l00664"></a>00664       usb_status = USBD_OK;
<a name="l00665"></a>00665     <span class="keywordflow">break</span>;
<a name="l00666"></a>00666     <span class="keywordflow">case</span> HAL_ERROR :
<a name="l00667"></a>00667       usb_status = USBD_FAIL;
<a name="l00668"></a>00668     <span class="keywordflow">break</span>;
<a name="l00669"></a>00669     <span class="keywordflow">case</span> HAL_BUSY :
<a name="l00670"></a>00670       usb_status = USBD_BUSY;
<a name="l00671"></a>00671     <span class="keywordflow">break</span>;
<a name="l00672"></a>00672     <span class="keywordflow">case</span> HAL_TIMEOUT :
<a name="l00673"></a>00673       usb_status = USBD_FAIL;
<a name="l00674"></a>00674     <span class="keywordflow">break</span>;
<a name="l00675"></a>00675     <span class="keywordflow">default</span> :
<a name="l00676"></a>00676       usb_status = USBD_FAIL;
<a name="l00677"></a>00677     <span class="keywordflow">break</span>;
<a name="l00678"></a>00678   }
<a name="l00679"></a>00679   <span class="keywordflow">return</span> usb_status;    
<a name="l00680"></a>00680 }
<a name="l00681"></a>00681 
<a name="l00690"></a><a class="code" href="usbd__conf_8c.html#259b00707b333065b66be515dd019428">00690</a> USBD_StatusTypeDef <a class="code" href="usbd__conf_8c.html#259b00707b333065b66be515dd019428" title="Prepares an endpoint for reception.">USBD_LL_PrepareReceive</a>(USBD_HandleTypeDef *pdev, uint8_t ep_addr, uint8_t *pbuf, uint16_t size)
<a name="l00691"></a>00691 {
<a name="l00692"></a>00692   HAL_StatusTypeDef hal_status = HAL_OK;
<a name="l00693"></a>00693   USBD_StatusTypeDef usb_status = USBD_OK;
<a name="l00694"></a>00694 
<a name="l00695"></a>00695   hal_status = HAL_PCD_EP_Receive(pdev-&gt;pData, ep_addr, pbuf, size);
<a name="l00696"></a>00696      
<a name="l00697"></a>00697   <span class="keywordflow">switch</span> (hal_status) {
<a name="l00698"></a>00698     <span class="keywordflow">case</span> HAL_OK :
<a name="l00699"></a>00699       usb_status = USBD_OK;
<a name="l00700"></a>00700     <span class="keywordflow">break</span>;
<a name="l00701"></a>00701     <span class="keywordflow">case</span> HAL_ERROR :
<a name="l00702"></a>00702       usb_status = USBD_FAIL;
<a name="l00703"></a>00703     <span class="keywordflow">break</span>;
<a name="l00704"></a>00704     <span class="keywordflow">case</span> HAL_BUSY :
<a name="l00705"></a>00705       usb_status = USBD_BUSY;
<a name="l00706"></a>00706     <span class="keywordflow">break</span>;
<a name="l00707"></a>00707     <span class="keywordflow">case</span> HAL_TIMEOUT :
<a name="l00708"></a>00708       usb_status = USBD_FAIL;
<a name="l00709"></a>00709     <span class="keywordflow">break</span>;
<a name="l00710"></a>00710     <span class="keywordflow">default</span> :
<a name="l00711"></a>00711       usb_status = USBD_FAIL;
<a name="l00712"></a>00712     <span class="keywordflow">break</span>;
<a name="l00713"></a>00713   }
<a name="l00714"></a>00714   <span class="keywordflow">return</span> usb_status; 
<a name="l00715"></a>00715 }
<a name="l00716"></a>00716 
<a name="l00723"></a><a class="code" href="usbd__conf_8c.html#eb80f50482e04c046ba41f5ea58a1b2b">00723</a> uint32_t <a class="code" href="usbd__conf_8c.html#eb80f50482e04c046ba41f5ea58a1b2b" title="Returns the last transfered packet size.">USBD_LL_GetRxDataSize</a>(USBD_HandleTypeDef *pdev, uint8_t ep_addr)
<a name="l00724"></a>00724 {
<a name="l00725"></a>00725   <span class="keywordflow">return</span> HAL_PCD_EP_GetRxCount((PCD_HandleTypeDef*) pdev-&gt;pData, ep_addr);
<a name="l00726"></a>00726 }
<a name="l00727"></a>00727 
<a name="l00733"></a><a class="code" href="usbd__conf_8c.html#383d9a41089cf426cdc61b5b24e2ca0a">00733</a> <span class="keywordtype">void</span> <a class="code" href="usbd__conf_8c.html#383d9a41089cf426cdc61b5b24e2ca0a" title="Delays routine for the USB device library.">USBD_LL_Delay</a>(uint32_t Delay)
<a name="l00734"></a>00734 {
<a name="l00735"></a>00735   HAL_Delay(Delay);
<a name="l00736"></a>00736 }
<a name="l00737"></a>00737 
<a name="l00743"></a><a class="code" href="usbd__conf_8c.html#2df01b9aae6026e9f6b55da3b1e72aee">00743</a> <span class="keywordtype">void</span> *<a class="code" href="usbd__conf_8c.html#2df01b9aae6026e9f6b55da3b1e72aee" title="Static single allocation.">USBD_static_malloc</a>(uint32_t size)
<a name="l00744"></a>00744 {
<a name="l00745"></a>00745   <span class="keyword">static</span> uint32_t mem[(<span class="keyword">sizeof</span>(USBD_CDC_HandleTypeDef)/4)+1];<span class="comment">/* On 32-bit boundary */</span>
<a name="l00746"></a>00746   <span class="keywordflow">return</span> mem;
<a name="l00747"></a>00747 }
<a name="l00748"></a>00748 
<a name="l00754"></a><a class="code" href="usbd__conf_8c.html#92ed1214efe53f54b3586a6233cfa5a6">00754</a> <span class="keywordtype">void</span> <a class="code" href="usbd__conf_8c.html#92ed1214efe53f54b3586a6233cfa5a6" title="Dummy memory free.">USBD_static_free</a>(<span class="keywordtype">void</span> *p)
<a name="l00755"></a>00755 {
<a name="l00756"></a>00756 
<a name="l00757"></a>00757 }
<a name="l00758"></a>00758 
<a name="l00765"></a><a class="code" href="usbd__conf_8c.html#3d04e2831c0a46d0e6719c1a2caba5b1">00765</a> <span class="keywordtype">void</span> <a class="code" href="usbd__conf_8c.html#3d04e2831c0a46d0e6719c1a2caba5b1" title="Software device connection.">HAL_PCDEx_SetConnectionState</a>(PCD_HandleTypeDef *hpcd, uint8_t state)
<a name="l00766"></a>00766 {
<a name="l00767"></a>00767   <span class="comment">/* USER CODE BEGIN 6 */</span>
<a name="l00768"></a>00768   <span class="keywordflow">if</span> (state == 1)
<a name="l00769"></a>00769   {
<a name="l00770"></a>00770     <span class="comment">/* Configure Low connection state. */</span>
<a name="l00771"></a>00771 
<a name="l00772"></a>00772   }
<a name="l00773"></a>00773   <span class="keywordflow">else</span>
<a name="l00774"></a>00774   {
<a name="l00775"></a>00775     <span class="comment">/* Configure High connection state. */</span>
<a name="l00776"></a>00776 
<a name="l00777"></a>00777   }
<a name="l00778"></a>00778   <span class="comment">/* USER CODE END 6 */</span>
<a name="l00779"></a>00779 }
<a name="l00780"></a>00780 
<a name="l00781"></a>00781 <span class="comment">/************************ (C) COPYRIGHT STMicroelectronics *****END OF FILE****/</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Документация по test_prog. Последние изменения: Thu Jul 19 12:27:42 2018. Создано системой&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
